MyShell
MyShell — это пользовательский шелл, разработанный на языке C, предоставляющий расширенные возможности для взаимодействия с системой. Этот шелл включает выполнение стандартных системных команд, управление историей команд, работу с переменными окружения, обработку сигналов, интеграцию с виртуальной файловой системой (VFS) для отображения задач cron, а также возможности создания дампов памяти процессов. Цель проекта — предоставить гибкую и расширяемую оболочку, которая может быть полезна как для обучения, так и для практического использования.

Содержание
Особенности
Требования
Установка
Компиляция
Использование
Запуск шелла
Доступные команды
Команды для выхода
История команд
Команда echo
Работа с переменными окружения
Выполнение бинарных команд
Проверка загрузочного сектора
VFS для задач cron
Создание дампа памяти
Перенаправление вывода
Обработка сигналов
Перезагрузка конфигурации (SIGHUP)
Виртуальная файловая система (VFS) для задач cron
Создание дампов памяти
Переменные окружения
История команд
Вклад в проект
Лицензия
Особенности
Интерактивное выполнение команд: Поддержка стандартных Unix-команд, таких как ls, pwd, cat и других.
Команды для выхода: Выход из шелла с помощью exit, \q или комбинации Ctrl+D.
История команд: Сохранение введённых команд и возможность их просмотра.
Команда echo: Имитация стандартной команды echo для вывода текста.
Работа с переменными окружения: Вывод значений переменных окружения с помощью команды \e.
Выполнение бинарных команд: Возможность выполнения указанных бинарных файлов.
Обработка сигналов: Обработка сигнала SIGHUP для вывода сообщения о перезагрузке конфигурации.
Проверка загрузочного сектора: Проверка загрузочного сектора устройства с помощью команды \l.
VFS для задач cron: Монтирование виртуальной файловой системы для отображения текущих задач cron с помощью команды \cron.
Создание дампов памяти: Создание дампов памяти процессов с помощью команды \mem.
Перенаправление вывода: Поддержка перенаправления вывода команд с помощью > и >>.
Требования
Операционная система: Unix-подобная ОС (например, Linux).
Компилятор: GCC или любой другой C-компилятор, поддерживающий стандарт C99 или выше.
Библиотеки:
FUSE (Filesystem in Userspace): Требуется для реализации виртуальной файловой системы.
Установка FUSE и Заголовочных Файлов
Для Debian/Ubuntu:

sudo apt-get update
sudo apt-get install libfuse-dev
Для Fedora:

sudo dnf install fuse-devel
Для Arch Linux:

sudo pacman -S fuse3
Установка
Клонирование репозитория:

git clone https://github.com/ваш-репозиторий/myshell.git
cd myshell
Компиляция:

Используйте следующую команду для компиляции исходного кода:

gcc main.c -o myshell -D_FILE_OFFSET_BITS=64 -lfuse
Опции:
-o myshell: Указывает имя выходного файла.
main.c: Исходный файл.
-D_FILE_OFFSET_BITS=64: Обеспечивает поддержку 64-битных смещений файлов.
-lfuse: Линковка с библиотекой FUSE.
Компиляция
Для успешной компиляции убедитесь, что у вас установлены все необходимые библиотеки и заголовочные файлы. Выполните следующую команду в директории с исходным кодом:

gcc main.c -o myshell -D_FILE_OFFSET_BITS=64 -lfuse
Пояснение команды:

gcc: Компилятор языка C.
main.c: Основной исходный файл проекта.
-o myshell: Имя создаваемого исполняемого файла.
-D_FILE_OFFSET_BITS=64: Директива препроцессора для поддержки больших файлов.
-lfuse: Линковка с библиотекой FUSE для работы виртуальной файловой системы.
Использование
Запуск шелла
После успешной компиляции запустите шелл командой:

./myshell
Вы увидите приветственное сообщение и приглашение для ввода команд.

Доступные команды
Команды для выхода
exit: Завершение работы шелла.
\q: Альтернативный способ выхода.
Ctrl+D: Отправка сигнала EOF для выхода из шелла.
Пример:

/home/user >> exit
Выход из шелла
История команд
history: Отображение списка введённых команд.
Пример:

/home/user >> history
ls
\cron
echo "Hello, World!"
history
Команда echo
echo [текст]: Выводит указанный текст.
Пример:

/home/user >> echo Привет, мир!
Привет, мир!
Работа с переменными окружения
\e $VAR: Выводит значение переменной окружения VAR.
Пример:

/home/user >> \e $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
Выполнение бинарных команд
Выполняйте любые доступные бинарные файлы, указав их имя и аргументы.

Пример:

/home/user >> /bin/ls -la
Проверка загрузочного сектора
\l <устройство>: Проверяет загрузочный сектор указанного устройства.
Пример:

/home/user >> \l sda
Диск /dev/sda является загрузочным (сигнатура 0xAA55 найдена).
VFS для задач cron
\cron: Монтирует виртуальную файловую систему в /tmp/vfs, отображающую текущие задачи cron в файле tasks.
Пример:

/home/user >> \cron
VFS успешно смонтирован в /tmp/vfs. Список задач cron доступен.
После монтирования VFS вы можете просматривать задачи cron через файл /tmp/vfs/tasks:

/home/user >> cat /tmp/vfs/tasks
# Edit this file to introduce tasks to be run by cron.
# Each task to run has to be defined through a single line
# indicating with different fields when the task will be run
# and what command to run for the task
Создание дампа памяти
\mem <PID>: Создаёт дамп памяти процесса с указанным PID и сохраняет его в файл memory_dump_<PID>.txt.
Пример:

/home/user >> \mem 12345
Дамп памяти процесса 12345 сохранён в файл: memory_dump_12345.txt
Перенаправление вывода
Поддерживается перенаправление вывода команд с помощью операторов > и >>.

>: Перенаправление вывода в файл (перезапись).
>>: Перенаправление вывода в файл (добавление).
Примеры:

/home/user >> echo "Hello" > output.txt
Создаст или перезапишет файл output.txt с содержимым Hello.

/home/user >> echo "World" >> output.txt
Добавит строку World в конец файла output.txt.

Обработка сигналов
Перезагрузка конфигурации (SIGHUP)
При получении сигнала SIGHUP, шелл выводит декоративное сообщение о перезагрузке конфигурации.

Пример:

Найдите PID вашего шелла:

ps aux | grep myshell
Отправьте сигнал SIGHUP:

kill -SIGHUP <PID>
Результат:

╔════════════════════════════════════════╗
║    Configuration Reloaded             ║
╚════════════════════════════════════════╝
Виртуальная файловая система (VFS) для задач cron
VFS для cron предоставляет удобный способ просмотра текущих задач планировщика cron через файловую систему. После монтирования VFS вы можете просматривать задачи cron как обычный файл.

Монтирование VFS
/home/user >> \cron
VFS успешно смонтирован в /tmp/vfs. Список задач cron доступен.
Просмотр задач cron
/home/user >> cat /tmp/vfs/tasks
# Содержимое crontab
Примечание: Для корректной работы VFS необходимо, чтобы у пользователя были права на чтение crontab.

Создание дампов памяти
Команда \mem позволяет создать дамп памяти указанного процесса. Это может быть полезно для отладки или анализа.

Использование
/home/user >> \mem 12345
Дамп памяти процесса 12345 сохранён в файл: memory_dump_12345.txt
Примечание: Для создания дампов памяти могут потребоваться соответствующие права доступа.

Переменные окружения
Шелл позволяет выводить значения переменных окружения с помощью команды \e.

Пример
/home/user >> \e $HOME
/home/user
История команд
Все введённые команды сохраняются в файл history.txt. Вы можете просмотреть историю с помощью команды history.

Пример
/home/user >> history
ls
\cron
echo "Hello, World!"
history
Вклад в проект
Вкладывать можно следующим образом:

Форк репозитория.
Создание новой ветки для изменений.
Внесение изменений и коммит.
Отправка пулл-запроса.
Пожалуйста, следуйте общепринятым стандартам кодирования и включайте описательные сообщения коммитов.

Лицензия
Этот проект лицензирован под лицензией MIT. Подробнее смотрите в файле LICENSE.

Заключение
MyShell предоставляет мощные инструменты для взаимодействия с системой, расширяя стандартные возможности Unix-оболочки. Благодаря поддержке истории команд, переменных окружения, обработки сигналов и интеграции с виртуальной файловой системой, этот шелл может быть полезен как для начинающих пользователей, так и для опытных администраторов системы. Дополнительные функции, такие как создание дампов памяти и проверка загрузочных секторов, делают MyShell универсальным инструментом для различных задач.

Если у вас есть предложения по улучшению или вы хотите внести свой вклад в развитие проекта, пожалуйста, создавайте пулл-запросы или обращайтесь через issues.
